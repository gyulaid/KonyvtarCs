@page "/members/new"
@using LibraryApi.Contracts.Member
@using LibrarianBlazorApp.Services
@inject IMemberService MemberService
@inject NavigationManager NavigationManager

<h3>Add new member:</h3>

<EditForm Model="@Member" OnValidSubmit="@HandleValidSubmitAsync">
    <div class="mb-3">
        <label class="form-label">Name</label>
        <InputText @bind-Value="@Member.Name" class="form-control"></InputText>
    </div>
    <div class="mb-3">
        <label class="form-label">Address</label>
        <InputText @bind-Value="@Member.Address" class="form-control"></InputText>
    </div>
    <div class="mb-3">
        <label class="form-label">Date of birth</label>
        <InputText bind-Value="@Member.DateOfBirth" class="form-control"></InputText>
    </div>
    <button type="submit" class="btn btn btn-primary form-control">Add Member</button>
</EditForm>


@code {
    private CreateMemberDto Member { get; set; } = new();

    private async Task HandleValidSubmitAsync()
    {
        //Not working for some reason
        //await MemberService.AddMemberAsync(Member);
        //NavigationManager.NavigateTo("/members");
        
    }
    
    
    
    


}